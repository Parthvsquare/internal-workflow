{
  "name": "Lead Source Activation Workflow",
  "description": "Automatically create setup tasks when lead sources are activated",
  "segment": "MARKETING",
  "isActive": true,
  "createdBy": "9dfba030-fa1a-4f5c-a155-aa40d79d72a5",
  "trigger": {
    "triggerKey": "lead_sources_table_change",
    "properties": {
      "table_name": "lead_sources",
      "change_type": ["UPDATE"],
      "monitor_fields": ["is_active", "name", "code", "display_order"]
    },
    "filters": {
      "combinator": "AND",
      "conditions": [
        {
          "variable": "{{variable.operation}}",
          "operator": "equals",
          "value": "UPDATE",
          "type": "string"
        },
        {
          "variable": "{{variable.after.is_active}}",
          "operator": "equals",
          "value": true,
          "type": "boolean"
        },
        {
          "variable": "{{variable.before.is_active}}",
          "operator": "equals",
          "value": false,
          "type": "boolean"
        }
      ]
    }
  },
  "steps": [
    {
      "name": "create_setup_task",
      "kind": "ACTION",
      "actionKey": "task_management",
      "configuration": {
        "resource": "task",
        "operation": "create",
        "parameters": {
          "operation": "create",
          "title": "Setup marketing campaign for {{variable.after.name}}",
          "description": "Lead source '{{variable.after.name}}' ({{variable.after.code}}) has been activated.\n\nRequired actions:\n1. Set up tracking codes\n2. Configure lead routing\n3. Create marketing materials\n4. Test lead capture forms\n5. Notify sales team\n\nLead Source Details:\n- Code: {{variable.after.code}}\n- Name: {{variable.after.name}}\n- Display Order: {{variable.after.display_order}}\n- Activated: {{variable.timestamp}}",
          "status": "pending",
          "priority": "high",
          "dueDateDynamic": "+1d",
          "entityType": "crm_leads",
          "entityId": "{{variable.after.code}}",
          "additionalData": {
            "lead_source_code": "{{variable.after.code}}",
            "lead_source_name": "{{variable.after.name}}",
            "activation_date": "{{variable.timestamp}}",
            "previous_status": "{{variable.before.is_active}}",
            "workflow_trigger": "lead_source_activation"
          }
        }
      }
    }
  ],
  "edges": []
}
